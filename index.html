<!DOCTYPE html>
<html>
<head>
<title>Contact Form</title>
</head>

<body>

<h2>Contact Us</h2>

<form id="leadForm">

  <input id="name" placeholder="Name" required><br><br>

  <input id="phone" placeholder="Mobile Number" required><br><br>

  <input id="email" placeholder="Email" required><br><br>

  <textarea id="msg" placeholder="Message"></textarea><br><br>

  <button type="submit">Submit</button>

</form>


<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";


// ========== FIREBASE CONFIG ==========
const firebaseConfig = {
  databaseURL: "https://ship-53cd8-default-rtdb.firebaseio.com/"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);


// ========== TELEGRAM FUNCTION ==========
async function sendTelegram(data) {

  const text = `
ğŸ”¥ New Website Lead

ğŸ‘¤ Name: ${data.name}
ğŸ“± Mobile: ${data.phone}
ğŸ“§ Email: ${data.email}

ğŸ“ Message:
${data.message}
`;

  const BOT_TOKEN = "8519947258:AAGJzcVNkJXGndbc1O9C2e_rNgQWAleNhFY";
  const CHAT_ID = "6820660513";

  const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

  await fetch(url, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      chat_id: CHAT_ID,
      text: text
    })
  });
}



// ========== FORM SUBMIT ==========
document.getElementById("leadForm")
.addEventListener("submit", async (e) => {

  e.preventDefault();

  const data = {
    name: name.value,
    phone: phone.value,
    email: email.value,
    message: msg.value,
    time: Date.now()
  };

  // 1. Firebase me save
  await push(ref(db, "leads"), data);

  // 2. Telegram alert
  await sendTelegram(data);

  alert("Form Submit Ho Gaya ğŸ‘");

  leadForm.reset();

});

</script>

</body>
</html>
